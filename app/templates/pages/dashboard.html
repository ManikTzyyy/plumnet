{% extends 'index.html' %} {% block content %} {% load static %} {% load custom_filters%}

<div class="column dashboard content-page">
  <div class="main-container row">
    <div class="column container1">
      <div class="item card-config quick column">
        <div class="title row">
          <div class="main-text" style="--clr: var(--clr-second)">
            Quick Link
          </div>
          <i
            class="fa-solid fa-gears"
            style="--clr: var(--clr-fourth); --icon-clr: var(--clr-second)"
          ></i>
        </div>
        <div class="quick-link row">
          <a href="{% url 'add-server' %}" class="row">
            <i
              class="fa-solid fa-plus"
              style="--clr: var(--clr-fourth); --icon-clr: var(--clr-second)"
            ></i>
            <b>Add Server</b>
          </a>
          <a href="{% url 'add-paket' %}" class="row">
            <i
              class="fa-solid fa-plus"
              style="--clr: var(--clr-fourth); --icon-clr: var(--clr-second)"
            ></i>
            <b>Add Paket</b>
          </a>
          <a href="{% url 'add-ip' %}" class="row">
            <i
              class="fa-solid fa-plus"
              style="--clr: var(--clr-fourth); --icon-clr: var(--clr-second)"
            ></i>
            <b>Add IP Pool</b>
          </a>
          <a href="{% url 'add-client' %}" class="row">
            <i
              class="fa-solid fa-plus"
              style="--clr: var(--clr-fourth); --icon-clr: var(--clr-second)"
            ></i>
            <b>Add Client</b>
          </a>
        </div>
      </div>
      <div class="item card-monitoring column">
        <div class="title row">
          <div class="main-text" style="--clr: var(--clr-second)">Server</div>
          <select name="server" id="server">
            {% for server in servers %}
            <option value="{{ server.id }}" {% if forloop.first %} selected {% endif %}>
              {{ server.name }}
            </option>
            {% endfor %}
          </select>
        </div>
        <div id="server-info" class="column" style="gap: 10px"></div>
      </div>
    </div>
    <div class="column container2">
      <div class="item card-config column">
        <div class="item card-client column">
          <div class="title row">
            <div class="text">
              <div class="main-text" style="--clr: var(--clr-g1)">
                Total Pelanggan
              </div>
              <!-- <div class="text-grey">Last 30 Days</div> -->
            </div>
            <i
              class="fa-solid fa-user"
              style="--clr: var(--clr-g2); --icon-clr: var(--clr-g1)"
            ></i>
          </div>
          <div class="number" style="--clr: var(--clr-g1)">
            {{ total_clients }}
          </div>
        </div>
        <div class="item card-client column">
          <div class="title row">
            <div class="text">
              <div class="main-text" style="--clr: var(--clr-y1)">
                Menunggu Konfirmasi
              </div>
              <!-- <div class="text-grey">Last 30 Days</div> -->
            </div>
            <i
              class="fa-solid fa-user-clock"
              style="--clr: var(--clr-y2); --icon-clr: var(--clr-y1)"
            ></i>
          </div>
          <div class="number" style="--clr: var(--clr-y1)">
            {{ inactive_clients }}
          </div>
        </div>
      </div>
      <div class="item card-config column">
        <div class="title row">
          <div class="main-text" style="--clr: var(--clr-second)">
            Konfigurasi
          </div>
          <i
            class="fa-solid fa-gears"
            style="--clr: var(--clr-fourth); --icon-clr: var(--clr-second)"
          ></i>
        </div>
        <div class="config-wrapper row">
          <div class="config-item column">
            <i class="fa-solid fa-server"></i>
            <div class="number">{{ total_servers }}</div>
            <div class="text-grey">Server</div>
          </div>
          <div class="config-item column">
            <i class="fa-solid fa-coins"></i>
            <div class="number">{{ total_pakets }}</div>
            <div class="text-grey">Paket</div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="dashboard-table column">
    <div class="header-dashboard-table column">
      <div class="row title-head-td">
        <i
          class="fa-solid fa-user"
          style="--clr: var(--clr-fourth); --icon-clr: var(--clr-second)"
        ></i>
        <span class="title">Daftar Pelanggan</span>
      </div>
    </div>
    <div class="table-container">
      <table class="table" id="table">
        <thead>
          <tr class="t-head">
            <th>#</th>
            <th>Nama</th>
            <th class="w-sm">Paket</th>
            <th class="center-th">Status</th>
            <th>ID PPPoE</th>
            <th>Server</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody>
          {% for client in clients %}
        <tr class="t-d">
          <td>{{ client.id }}</td>
          <td>{{ client.name }}</td>
          <td>{{ client.id_paket.price|rupiah }} | {{client.id_paket.limit}}</td>
          <td class="td-center">
            <div
              class="{% if client.isActive %}enable-t{% else %}disable-t{% endif %}"
            >
              {% if client.isActive %}Online{% else %}Offline{% endif %}
            </div>
          </td>
          <td>{{ client.pppoe }}</td>
          <td>{{ client.id_paket.id_ip_pool.id_server.name }}</td>
          <td>
            <a href="{% url 'detail-client' client.id %}" class="main-button"
              >View</a
            >
          </td>
        </tr>
        {% endfor %}
        </tbody>
        
      </table>
    </div>
  </div>
</div>

<script>
  const NO_DATA_IMG = "{% static 'assets/nodata.webp' %}";
</script>

<script src="{% static 'js/scripts/chartDashboard.js' %}"></script>

<script src="{% static 'js/library/chart.umd.js' %}"></script>



<script>
  $(document).ready(function () {
    $("#table").DataTable({
      pageLength: 10,
      searching: true,
      stateSave: true,
      columnDefs: [
      { targets: [6], orderable: false, searchable: false }
        ]
    });
  });
</script>

{% endblock %}


